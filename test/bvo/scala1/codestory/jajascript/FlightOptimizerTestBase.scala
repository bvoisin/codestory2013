package bvo.scala1.codestory.jajascript

import org.scalatest._
import org.scalatest.matchers.ShouldMatchers
import scala.io.Source
import bvo.scala1.codestory.jajascript.recursive._
import scala.collection.mutable.ArrayBuffer

abstract class FlightOptimizerTestBase extends FunSuite with BeforeAndAfter with ShouldMatchers with FlightOptimizerBase {

  test("case enonce") {
    assert("{\"gain\":18,\"path\":[\"MONAD42\",\"LEGACY01\"]}" === optimize("[" +
      "                { \"VOL\": \"MONAD42\", \"DEPART\": 0, \"DUREE\": 5, \"PRIX\": 10 }," +
      "                { \"VOL\": \"META18\", \"DEPART\": 3, \"DUREE\": 7, \"PRIX\": 14 }," +
      "                { \"VOL\": \"LEGACY01\", \"DEPART\": 5, \"DUREE\": 9, \"PRIX\": 8 }," +
      "                { \"VOL\": \"YAGNI17\", \"DEPART\": 5, \"DUREE\": 9, \"PRIX\": 7 }" +
      "        ]"))
  }

  test("case enonce avec long vol cher") {
    assert("{\"gain\":30,\"path\":[\"META18\"]}" === optimize("[" +
      "                { \"VOL\": \"MONAD42\", \"DEPART\": 0, \"DUREE\": 5, \"PRIX\": 10 }," +
      "                { \"VOL\": \"META18\", \"DEPART\": 3, \"DUREE\": 7, \"PRIX\": 30 }," + ///prix �lev�, mais dur�e empechant les autres vols
      "                { \"VOL\": \"LEGACY01\", \"DEPART\": 5, \"DUREE\": 9, \"PRIX\": 8 }," +
      "                { \"VOL\": \"YAGNI17\", \"DEPART\": 5, \"DUREE\": 9, \"PRIX\": 7 }" +
      "        ]"))
  }

  test("filter low price same depart/duree") {
    val volCher = FlightRequest("volCher", 0, 8, 10)
    val volPasCher = FlightRequest("volPasCher", 0, 8, 1)

    assert(prepareRequestSeq(ArrayBuffer(volCher, volPasCher)) === List(volCher))
  }

  test("filter low price same depart, longer duree") {
    val volCher = FlightRequest("volCher", 0, 8, 10)
    val volPasCher = FlightRequest("volPasCher", 0, 10, 1)

    assert(prepareRequestSeq(ArrayBuffer(volCher, volPasCher)) === List(volCher))
  }

  /**
   * On peut ignorer le vol pas cher dans ce cas:
   * ---------- 1 volPasCher
   *  ----- 10 volCher
   */
  test("filter low price overriden by higher price on smaller timeperiod") {
    val volCher = FlightRequest("volCher", 1, 5, 10)
    val volPasCher = FlightRequest("volPasCher", 0, 10, 1) //moins cher et bloquant le cher sans augmenter la periode

    assert(prepareRequestSeq(ArrayBuffer(volCher, volPasCher)) === List(volCher))
  }

  test("long test") {
    val json = "[ { \"VOL\": \"encouraging-trapdoor-79\", \"DEPART\": 2, \"DUREE\": 8, \"PRIX\": 9 }, { \"VOL\": \"easy-brow-9\", \"DEPART\": 0, \"DUREE\": 2, \"PRIX\": 11 }, { \"VOL\": \"grotesque-window-19\", \"DEPART\": 2, \"DUREE\": 3, \"PRIX\": 8 }, { \"VOL\": \"brainy-refugee-85\", \"DEPART\": 2, \"DUREE\": 2, \"PRIX\": 14 }, { \"VOL\": \"clumsy-nosebleed-66\", \"DEPART\": 2, \"DUREE\": 16, \"PRIX\": 2 }, { \"VOL\": \"moaning-greens-15\", \"DEPART\": 9, \"DUREE\": 2, \"PRIX\": 21 }, { \"VOL\": \"quaint-weevil-4\", \"DEPART\": 7, \"DUREE\": 10, \"PRIX\": 12 }, { \"VOL\": \"sleepy-mush-82\", \"DEPART\": 7, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"tired-notch-59\", \"DEPART\": 7, \"DUREE\": 8, \"PRIX\": 13 }, { \"VOL\": \"innocent-pear-81\", \"DEPART\": 6, \"DUREE\": 19, \"PRIX\": 6 }, { \"VOL\": \"tired-pennant-31\", \"DEPART\": 10, \"DUREE\": 9, \"PRIX\": 13 }, { \"VOL\": \"wicked-instep-76\", \"DEPART\": 13, \"DUREE\": 2, \"PRIX\": 16 }, { \"VOL\": \"panicky-sibilant-84\", \"DEPART\": 12, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"black-cafeteria-98\", \"DEPART\": 10, \"DUREE\": 5, \"PRIX\": 13 }, { \"VOL\": \"dead-cruiser-16\", \"DEPART\": 10, \"DUREE\": 1, \"PRIX\": 6 }, { \"VOL\": \"blue-terminology-31\", \"DEPART\": 19, \"DUREE\": 1, \"PRIX\": 7 }, { \"VOL\": \"wrong-grit-25\", \"DEPART\": 16, \"DUREE\": 4, \"PRIX\": 4 }, { \"VOL\": \"curious-furnace-94\", \"DEPART\": 16, \"DUREE\": 3, \"PRIX\": 5 }, { \"VOL\": \"shiny-thermometer-69\", \"DEPART\": 17, \"DUREE\": 5, \"PRIX\": 12 }, { \"VOL\": \"vivacious-valedictorian-97\", \"DEPART\": 17, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"disgusted-sleepwalker-56\", \"DEPART\": 22, \"DUREE\": 8, \"PRIX\": 12 }, { \"VOL\": \"hilarious-sinner-19\", \"DEPART\": 20, \"DUREE\": 7, \"PRIX\": 5 }, { \"VOL\": \"lovely-shredder-97\", \"DEPART\": 22, \"DUREE\": 7, \"PRIX\": 10 }, { \"VOL\": \"fine-quake-54\", \"DEPART\": 23, \"DUREE\": 2, \"PRIX\": 15 }, { \"VOL\": \"grotesque-vigilance-41\", \"DEPART\": 24, \"DUREE\": 17, \"PRIX\": 1 }, { \"VOL\": \"upset-bill-6\", \"DEPART\": 25, \"DUREE\": 9, \"PRIX\": 4 }, { \"VOL\": \"straight-revolutionary-70\", \"DEPART\": 27, \"DUREE\": 2, \"PRIX\": 10 }, { \"VOL\": \"colorful-gold-91\", \"DEPART\": 28, \"DUREE\": 7, \"PRIX\": 8 }, { \"VOL\": \"sleepy-saffron-33\", \"DEPART\": 26, \"DUREE\": 1, \"PRIX\": 8 }, { \"VOL\": \"real-mailman-53\", \"DEPART\": 26, \"DUREE\": 8, \"PRIX\": 3 }, { \"VOL\": \"crazy-roadwork-53\", \"DEPART\": 33, \"DUREE\": 5, \"PRIX\": 24 }, { \"VOL\": \"long-tentacle-52\", \"DEPART\": 34, \"DUREE\": 5, \"PRIX\": 15 }, { \"VOL\": \"nasty-checkbook-14\", \"DEPART\": 34, \"DUREE\": 2, \"PRIX\": 4 }, { \"VOL\": \"raspy-volt-4\", \"DEPART\": 32, \"DUREE\": 7, \"PRIX\": 11 }, { \"VOL\": \"ill-historian-17\", \"DEPART\": 33, \"DUREE\": 6, \"PRIX\": 7 }, { \"VOL\": \"narrow-oar-44\", \"DEPART\": 39, \"DUREE\": 3, \"PRIX\": 25 }, { \"VOL\": \"straight-lacrosse-81\", \"DEPART\": 39, \"DUREE\": 6, \"PRIX\": 23 }, { \"VOL\": \"clean-antifreeze-76\", \"DEPART\": 39, \"DUREE\": 5, \"PRIX\": 5 }, { \"VOL\": \"inexpensive-plate-27\", \"DEPART\": 38, \"DUREE\": 6, \"PRIX\": 12 }, { \"VOL\": \"silly-wax-39\", \"DEPART\": 38, \"DUREE\": 1, \"PRIX\": 4 }, { \"VOL\": \"outrageous-literature-94\", \"DEPART\": 43, \"DUREE\": 2, \"PRIX\": 29 }, { \"VOL\": \"tall-lavatory-84\", \"DEPART\": 41, \"DUREE\": 1, \"PRIX\": 4 }, { \"VOL\": \"clumsy-pit-76\", \"DEPART\": 43, \"DUREE\": 10, \"PRIX\": 4 }, { \"VOL\": \"panicky-shade-66\", \"DEPART\": 44, \"DUREE\": 8, \"PRIX\": 15 }, { \"VOL\": \"cute-bumblebee-15\", \"DEPART\": 40, \"DUREE\": 15, \"PRIX\": 1 }, { \"VOL\": \"envious-summertime-24\", \"DEPART\": 48, \"DUREE\": 7, \"PRIX\": 21 }, { \"VOL\": \"confused-sinner-64\", \"DEPART\": 45, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"straight-scrooge-48\", \"DEPART\": 48, \"DUREE\": 1, \"PRIX\": 3 }, { \"VOL\": \"nervous-songbird-3\", \"DEPART\": 46, \"DUREE\": 6, \"PRIX\": 7 }, { \"VOL\": \"slow-windshield-15\", \"DEPART\": 45, \"DUREE\": 15, \"PRIX\": 3 }, { \"VOL\": \"frail-speculator-11\", \"DEPART\": 54, \"DUREE\": 10, \"PRIX\": 7 }, { \"VOL\": \"gifted-landlady-83\", \"DEPART\": 52, \"DUREE\": 7, \"PRIX\": 8 }, { \"VOL\": \"zealous-acorn-6\", \"DEPART\": 52, \"DUREE\": 5, \"PRIX\": 8 }, { \"VOL\": \"charming-soup-95\", \"DEPART\": 52, \"DUREE\": 1, \"PRIX\": 7 }, { \"VOL\": \"funny-amphetamine-95\", \"DEPART\": 50, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"handsome-machinery-12\", \"DEPART\": 57, \"DUREE\": 9, \"PRIX\": 1 }, { \"VOL\": \"tame-airbrush-3\", \"DEPART\": 58, \"DUREE\": 1, \"PRIX\": 20 }, { \"VOL\": \"beautiful-underbelly-27\", \"DEPART\": 55, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"real-scarecrow-47\", \"DEPART\": 56, \"DUREE\": 4, \"PRIX\": 14 }, { \"VOL\": \"voiceless-anklet-59\", \"DEPART\": 56, \"DUREE\": 6, \"PRIX\": 1 }, { \"VOL\": \"filthy-coconut-91\", \"DEPART\": 63, \"DUREE\": 5, \"PRIX\": 4 }, { \"VOL\": \"victorious-dune-55\", \"DEPART\": 61, \"DUREE\": 3, \"PRIX\": 9 }, { \"VOL\": \"nasty-pearl-96\", \"DEPART\": 61, \"DUREE\": 5, \"PRIX\": 7 }, { \"VOL\": \"important-stock-67\", \"DEPART\": 60, \"DUREE\": 10, \"PRIX\": 6 }, { \"VOL\": \"charming-bonbon-60\", \"DEPART\": 61, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"husky-gauche-91\", \"DEPART\": 69, \"DUREE\": 1, \"PRIX\": 30 }, { \"VOL\": \"whispering-link-56\", \"DEPART\": 69, \"DUREE\": 2, \"PRIX\": 15 }, { \"VOL\": \"crooked-optometry-9\", \"DEPART\": 66, \"DUREE\": 7, \"PRIX\": 8 }, { \"VOL\": \"confused-pound-96\", \"DEPART\": 69, \"DUREE\": 4, \"PRIX\": 11 }, { \"VOL\": \"aggressive-hill-47\", \"DEPART\": 65, \"DUREE\": 9, \"PRIX\": 1 }, { \"VOL\": \"sore-voodoo-24\", \"DEPART\": 73, \"DUREE\": 2, \"PRIX\": 20 }, { \"VOL\": \"smoggy-restoration-74\", \"DEPART\": 70, \"DUREE\": 8, \"PRIX\": 13 }, { \"VOL\": \"poised-cape-92\", \"DEPART\": 72, \"DUREE\": 10, \"PRIX\": 2 }, { \"VOL\": \"grieving-dew-44\", \"DEPART\": 70, \"DUREE\": 4, \"PRIX\": 7 }, { \"VOL\": \"gentle-backward-24\", \"DEPART\": 74, \"DUREE\": 20, \"PRIX\": 6 }, { \"VOL\": \"lively-gipsy-74\", \"DEPART\": 75, \"DUREE\": 2, \"PRIX\": 19 }, { \"VOL\": \"wild-dude-67\", \"DEPART\": 76, \"DUREE\": 6, \"PRIX\": 8 }, { \"VOL\": \"busy-thankfulness-14\", \"DEPART\": 79, \"DUREE\": 1, \"PRIX\": 7 }, { \"VOL\": \"excited-collarbone-81\", \"DEPART\": 78, \"DUREE\": 7, \"PRIX\": 10 }, { \"VOL\": \"rich-mush-89\", \"DEPART\": 79, \"DUREE\": 11, \"PRIX\": 4 } ]";
    val expected = "{\"gain\":318,\"path\":[\"easy-brow-9\",\"brainy-refugee-85\",\"moaning-greens-15\",\"wicked-instep-76\",\"curious-furnace-94\",\"blue-terminology-31\",\"fine-quake-54\",\"sleepy-saffron-33\",\"straight-revolutionary-70\",\"crazy-roadwork-53\",\"silly-wax-39\",\"narrow-oar-44\",\"outrageous-literature-94\",\"envious-summertime-24\",\"tame-airbrush-3\",\"victorious-dune-55\",\"husky-gauche-91\",\"sore-voodoo-24\",\"lively-gipsy-74\",\"excited-collarbone-81\"]}"
    val expected2 = "{\"gain\":318,\"path\":[\"easy-brow-9\",\"brainy-refugee-85\",\"moaning-greens-15\",\"wicked-instep-76\",\"shiny-thermometer-69\",\"fine-quake-54\",\"sleepy-saffron-33\",\"straight-revolutionary-70\",\"crazy-roadwork-53\",\"silly-wax-39\",\"narrow-oar-44\",\"outrageous-literature-94\",\"envious-summertime-24\",\"tame-airbrush-3\",\"victorious-dune-55\",\"husky-gauche-91\",\"sore-voodoo-24\",\"lively-gipsy-74\",\"excited-collarbone-81\"]}"
    val ret = optimize(json)
    assert(expected == ret || expected2 == ret)
  }

  test("long test2") {
    val json = "[ { \"VOL\": \"jealous-mudslide-90\", \"DEPART\": 4, \"DUREE\": 1, \"PRIX\": 22 }, { \"VOL\": \"huge-thinner-45\", \"DEPART\": 4, \"DUREE\": 10, \"PRIX\": 21 }, { \"VOL\": \"horrible-producer-47\", \"DEPART\": 3, \"DUREE\": 4, \"PRIX\": 8 }, { \"VOL\": \"clumsy-sawmill-56\", \"DEPART\": 1, \"DUREE\": 1, \"PRIX\": 15 }, { \"VOL\": \"nutty-dragon-23\", \"DEPART\": 0, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"famous-pair-44\", \"DEPART\": 7, \"DUREE\": 5, \"PRIX\": 8 }, { \"VOL\": \"noisy-kleenex-64\", \"DEPART\": 5, \"DUREE\": 3, \"PRIX\": 19 }, { \"VOL\": \"filthy-cork-12\", \"DEPART\": 9, \"DUREE\": 6, \"PRIX\": 2 }, { \"VOL\": \"dead-overlap-23\", \"DEPART\": 7, \"DUREE\": 8, \"PRIX\": 9 }, { \"VOL\": \"excited-straw-82\", \"DEPART\": 5, \"DUREE\": 20, \"PRIX\": 1 }, { \"VOL\": \"large-ball-5\", \"DEPART\": 10, \"DUREE\": 8, \"PRIX\": 20 }, { \"VOL\": \"cute-rotation-71\", \"DEPART\": 11, \"DUREE\": 4, \"PRIX\": 17 }, { \"VOL\": \"dead-stimulus-85\", \"DEPART\": 10, \"DUREE\": 8, \"PRIX\": 10 }, { \"VOL\": \"cruel-nag-91\", \"DEPART\": 10, \"DUREE\": 3, \"PRIX\": 8 }, { \"VOL\": \"resonant-axle-47\", \"DEPART\": 14, \"DUREE\": 18, \"PRIX\": 5 }, { \"VOL\": \"different-wax-5\", \"DEPART\": 17, \"DUREE\": 3, \"PRIX\": 6 }, { \"VOL\": \"broad-owl-46\", \"DEPART\": 17, \"DUREE\": 5, \"PRIX\": 9 }, { \"VOL\": \"soft-monster-86\", \"DEPART\": 18, \"DUREE\": 10, \"PRIX\": 1 }, { \"VOL\": \"quiet-juice-74\", \"DEPART\": 19, \"DUREE\": 6, \"PRIX\": 13 }, { \"VOL\": \"cautious-adventurer-99\", \"DEPART\": 18, \"DUREE\": 12, \"PRIX\": 5 }, { \"VOL\": \"high-silhouette-85\", \"DEPART\": 21, \"DUREE\": 5, \"PRIX\": 23 }, { \"VOL\": \"determined-priest-75\", \"DEPART\": 24, \"DUREE\": 2, \"PRIX\": 4 }, { \"VOL\": \"poised-transience-40\", \"DEPART\": 20, \"DUREE\": 5, \"PRIX\": 10 }, { \"VOL\": \"thundering-waterfall-82\", \"DEPART\": 20, \"DUREE\": 6, \"PRIX\": 10 }, { \"VOL\": \"mammoth-duet-85\", \"DEPART\": 21, \"DUREE\": 18, \"PRIX\": 2 }, { \"VOL\": \"gigantic-antifreeze-61\", \"DEPART\": 25, \"DUREE\": 2, \"PRIX\": 7 }, { \"VOL\": \"fine-schoolhouse-98\", \"DEPART\": 27, \"DUREE\": 8, \"PRIX\": 21 }, { \"VOL\": \"alert-musketeer-42\", \"DEPART\": 29, \"DUREE\": 2, \"PRIX\": 9 }, { \"VOL\": \"perfect-dresser-72\", \"DEPART\": 27, \"DUREE\": 7, \"PRIX\": 12 }, { \"VOL\": \"long-mark-7\", \"DEPART\": 26, \"DUREE\": 6, \"PRIX\": 4 }, { \"VOL\": \"shrill-tape-91\", \"DEPART\": 34, \"DUREE\": 3, \"PRIX\": 22 }, { \"VOL\": \"poor-wrestler-52\", \"DEPART\": 33, \"DUREE\": 3, \"PRIX\": 4 }, { \"VOL\": \"spotless-professor-98\", \"DEPART\": 33, \"DUREE\": 3, \"PRIX\": 1 }, { \"VOL\": \"angry-lapel-78\", \"DEPART\": 31, \"DUREE\": 7, \"PRIX\": 14 }, { \"VOL\": \"moaning-turtle-46\", \"DEPART\": 34, \"DUREE\": 11, \"PRIX\": 5 }, { \"VOL\": \"cooing-khaki-17\", \"DEPART\": 37, \"DUREE\": 1, \"PRIX\": 6 }, { \"VOL\": \"fair-vapidity-86\", \"DEPART\": 39, \"DUREE\": 2, \"PRIX\": 6 }, { \"VOL\": \"wandering-trespasser-95\", \"DEPART\": 38, \"DUREE\": 10, \"PRIX\": 10 }, { \"VOL\": \"lucky-sextant-26\", \"DEPART\": 36, \"DUREE\": 4, \"PRIX\": 11 }, { \"VOL\": \"cheerful-oregano-50\", \"DEPART\": 36, \"DUREE\": 14, \"PRIX\": 4 }, { \"VOL\": \"steep-puff-88\", \"DEPART\": 40, \"DUREE\": 1, \"PRIX\": 16 }, { \"VOL\": \"poor-ranch-96\", \"DEPART\": 44, \"DUREE\": 8, \"PRIX\": 18 }, { \"VOL\": \"curious-bayonet-47\", \"DEPART\": 43, \"DUREE\": 7, \"PRIX\": 6 }, { \"VOL\": \"charming-sign-50\", \"DEPART\": 44, \"DUREE\": 8, \"PRIX\": 8 }, { \"VOL\": \"awful-cutoffs-36\", \"DEPART\": 42, \"DUREE\": 20, \"PRIX\": 3 }, { \"VOL\": \"famous-cornmeal-32\", \"DEPART\": 45, \"DUREE\": 3, \"PRIX\": 17 }, { \"VOL\": \"late-salsa-41\", \"DEPART\": 46, \"DUREE\": 4, \"PRIX\": 13 }, { \"VOL\": \"charming-signature-96\", \"DEPART\": 48, \"DUREE\": 1, \"PRIX\": 8 }, { \"VOL\": \"mammoth-shelter-27\", \"DEPART\": 49, \"DUREE\": 4, \"PRIX\": 10 }, { \"VOL\": \"defiant-cellar-50\", \"DEPART\": 46, \"DUREE\": 17, \"PRIX\": 2 }, { \"VOL\": \"fancy-report-20\", \"DEPART\": 52, \"DUREE\": 2, \"PRIX\": 12 }, { \"VOL\": \"agreeable-vellum-10\", \"DEPART\": 50, \"DUREE\": 2, \"PRIX\": 16 }, { \"VOL\": \"pleasant-medal-52\", \"DEPART\": 52, \"DUREE\": 4, \"PRIX\": 10 }, { \"VOL\": \"dark-pawnshop-7\", \"DEPART\": 52, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"square-piano-25\", \"DEPART\": 50, \"DUREE\": 1, \"PRIX\": 5 }, { \"VOL\": \"splendid-penknife-46\", \"DEPART\": 57, \"DUREE\": 2, \"PRIX\": 30 }, { \"VOL\": \"uptight-hay-87\", \"DEPART\": 59, \"DUREE\": 4, \"PRIX\": 15 }, { \"VOL\": \"old-crossbar-75\", \"DEPART\": 55, \"DUREE\": 10, \"PRIX\": 4 }, { \"VOL\": \"long-motorist-78\", \"DEPART\": 56, \"DUREE\": 8, \"PRIX\": 8 }, { \"VOL\": \"blue-eyed-crayfish-64\", \"DEPART\": 57, \"DUREE\": 14, \"PRIX\": 4 }, { \"VOL\": \"lucky-tenor-44\", \"DEPART\": 63, \"DUREE\": 10, \"PRIX\": 3 }, { \"VOL\": \"handsome-poplar-7\", \"DEPART\": 61, \"DUREE\": 2, \"PRIX\": 20 }, { \"VOL\": \"poor-pantsuit-40\", \"DEPART\": 63, \"DUREE\": 4, \"PRIX\": 2 }, { \"VOL\": \"tough-radiator-64\", \"DEPART\": 63, \"DUREE\": 9, \"PRIX\": 8 }, { \"VOL\": \"deep-camper-38\", \"DEPART\": 60, \"DUREE\": 11, \"PRIX\": 5 }, { \"VOL\": \"uptight-minibike-48\", \"DEPART\": 66, \"DUREE\": 5, \"PRIX\": 2 }, { \"VOL\": \"creepy-saucepan-93\", \"DEPART\": 66, \"DUREE\": 2, \"PRIX\": 6 }, { \"VOL\": \"kind-coffin-11\", \"DEPART\": 68, \"DUREE\": 9, \"PRIX\": 6 }, { \"VOL\": \"sleepy-oak-11\", \"DEPART\": 68, \"DUREE\": 6, \"PRIX\": 11 }, { \"VOL\": \"fast-skepticism-74\", \"DEPART\": 69, \"DUREE\": 6, \"PRIX\": 7 }, { \"VOL\": \"horrible-motor-35\", \"DEPART\": 74, \"DUREE\": 9, \"PRIX\": 18 }, { \"VOL\": \"rich-upstairs-27\", \"DEPART\": 74, \"DUREE\": 3, \"PRIX\": 14 }, { \"VOL\": \"blushing-pointer-30\", \"DEPART\": 72, \"DUREE\": 6, \"PRIX\": 10 }, { \"VOL\": \"moaning-tantrum-84\", \"DEPART\": 70, \"DUREE\": 6, \"PRIX\": 15 }, { \"VOL\": \"awful-ewe-12\", \"DEPART\": 74, \"DUREE\": 16, \"PRIX\": 6 }, { \"VOL\": \"puzzled-production-13\", \"DEPART\": 76, \"DUREE\": 3, \"PRIX\": 27 }, { \"VOL\": \"fancy-magazine-61\", \"DEPART\": 79, \"DUREE\": 7, \"PRIX\": 13 }, { \"VOL\": \"grotesque-twilight-27\", \"DEPART\": 78, \"DUREE\": 4, \"PRIX\": 1 }, { \"VOL\": \"embarrassed-smartness-47\", \"DEPART\": 75, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"shallow-grave-94\", \"DEPART\": 78, \"DUREE\": 14, \"PRIX\": 7 }, { \"VOL\": \"bewildered-standin-5\", \"DEPART\": 83, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"ancient-vigor-29\", \"DEPART\": 81, \"DUREE\": 9, \"PRIX\": 17 }, { \"VOL\": \"handsome-week-4\", \"DEPART\": 84, \"DUREE\": 9, \"PRIX\": 5 }, { \"VOL\": \"busy-prisoner-56\", \"DEPART\": 82, \"DUREE\": 7, \"PRIX\": 13 }, { \"VOL\": \"motionless-welfare-89\", \"DEPART\": 82, \"DUREE\": 5, \"PRIX\": 1 }, { \"VOL\": \"thoughtful-rocket-26\", \"DEPART\": 88, \"DUREE\": 9, \"PRIX\": 28 }, { \"VOL\": \"prickly-talc-5\", \"DEPART\": 88, \"DUREE\": 8, \"PRIX\": 17 }, { \"VOL\": \"dangerous-veterinarian-66\", \"DEPART\": 89, \"DUREE\": 4, \"PRIX\": 5 }, { \"VOL\": \"teeny-tiny-spout-63\", \"DEPART\": 86, \"DUREE\": 5, \"PRIX\": 12 }, { \"VOL\": \"faint-song-62\", \"DEPART\": 85, \"DUREE\": 17, \"PRIX\": 7 }, { \"VOL\": \"skinny-samaritan-46\", \"DEPART\": 91, \"DUREE\": 8, \"PRIX\": 24 }, { \"VOL\": \"calm-someday-89\", \"DEPART\": 92, \"DUREE\": 5, \"PRIX\": 6 }, { \"VOL\": \"homeless-souvenir-78\", \"DEPART\": 91, \"DUREE\": 4, \"PRIX\": 10 }, { \"VOL\": \"gifted-suntan-11\", \"DEPART\": 91, \"DUREE\": 9, \"PRIX\": 9 }, { \"VOL\": \"inexpensive-warthog-73\", \"DEPART\": 91, \"DUREE\": 11, \"PRIX\": 7 } ]";
    val expected = "{\"gain\":358,\"path\":[\"clumsy-sawmill-56\",\"jealous-mudslide-90\",\"noisy-kleenex-64\",\"cute-rotation-71\",\"different-wax-5\",\"high-silhouette-85\",\"perfect-dresser-72\",\"shrill-tape-91\",\"cooing-khaki-17\",\"steep-puff-88\",\"famous-cornmeal-32\",\"charming-signature-96\",\"agreeable-vellum-10\",\"fancy-report-20\",\"splendid-penknife-46\",\"handsome-poplar-7\",\"creepy-saucepan-93\",\"moaning-tantrum-84\",\"puzzled-production-13\",\"fancy-magazine-61\",\"teeny-tiny-spout-63\",\"skinny-samaritan-46\"]}"
    assert(expected === optimize(json))
  }

  test("250 requests") {
    val json = "[ { \"VOL\": \"hilarious-sample-30\", \"DEPART\": 4, \"DUREE\": 5, \"PRIX\": 29 }, { \"VOL\": \"immense-chick-39\", \"DEPART\": 2, \"DUREE\": 9, \"PRIX\": 9 }, { \"VOL\": \"beautiful-smoothness-46\", \"DEPART\": 0, \"DUREE\": 1, \"PRIX\": 8 }, { \"VOL\": \"filthy-plasterboard-33\", \"DEPART\": 0, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"hollow-zen-21\", \"DEPART\": 0, \"DUREE\": 15, \"PRIX\": 2 }, { \"VOL\": \"doubtful-goalkeeper-50\", \"DEPART\": 5, \"DUREE\": 7, \"PRIX\": 23 }, { \"VOL\": \"noisy-prairie-13\", \"DEPART\": 7, \"DUREE\": 3, \"PRIX\": 15 }, { \"VOL\": \"blue-tulip-42\", \"DEPART\": 5, \"DUREE\": 9, \"PRIX\": 3 }, { \"VOL\": \"innocent-nitroglycerine-82\", \"DEPART\": 6, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"expensive-wench-4\", \"DEPART\": 7, \"DUREE\": 3, \"PRIX\": 6 }, { \"VOL\": \"glamorous-rite-10\", \"DEPART\": 11, \"DUREE\": 6, \"PRIX\": 24 }, { \"VOL\": \"fast-electricity-59\", \"DEPART\": 11, \"DUREE\": 2, \"PRIX\": 8 }, { \"VOL\": \"nice-virus-53\", \"DEPART\": 12, \"DUREE\": 8, \"PRIX\": 10 }, { \"VOL\": \"thoughtless-handyman-55\", \"DEPART\": 13, \"DUREE\": 4, \"PRIX\": 7 }, { \"VOL\": \"clumsy-cookout-89\", \"DEPART\": 12, \"DUREE\": 14, \"PRIX\": 5 }, { \"VOL\": \"broad-barn-18\", \"DEPART\": 18, \"DUREE\": 9, \"PRIX\": 3 }, { \"VOL\": \"wonderful-stem-85\", \"DEPART\": 15, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"swift-sociology-45\", \"DEPART\": 15, \"DUREE\": 1, \"PRIX\": 5 }, { \"VOL\": \"dull-metal-30\", \"DEPART\": 16, \"DUREE\": 5, \"PRIX\": 15 }, { \"VOL\": \"healthy-radial-3\", \"DEPART\": 15, \"DUREE\": 9, \"PRIX\": 5 }, { \"VOL\": \"unsightly-vagrant-70\", \"DEPART\": 22, \"DUREE\": 8, \"PRIX\": 9 }, { \"VOL\": \"uptight-meatloaf-33\", \"DEPART\": 24, \"DUREE\": 7, \"PRIX\": 20 }, { \"VOL\": \"plain-plumbing-62\", \"DEPART\": 20, \"DUREE\": 8, \"PRIX\": 5 }, { \"VOL\": \"clever-pitcher-4\", \"DEPART\": 24, \"DUREE\": 10, \"PRIX\": 10 }, { \"VOL\": \"helpless-mucous-15\", \"DEPART\": 24, \"DUREE\": 20, \"PRIX\": 4 }, { \"VOL\": \"odd-tripod-17\", \"DEPART\": 26, \"DUREE\": 10, \"PRIX\": 2 }, { \"VOL\": \"narrow-sty-2\", \"DEPART\": 27, \"DUREE\": 5, \"PRIX\": 19 }, { \"VOL\": \"ashamed-elk-90\", \"DEPART\": 26, \"DUREE\": 3, \"PRIX\": 1 }, { \"VOL\": \"teeny-tiny-speedometer-55\", \"DEPART\": 25, \"DUREE\": 1, \"PRIX\": 6 }, { \"VOL\": \"gleaming-manuscript-27\", \"DEPART\": 26, \"DUREE\": 7, \"PRIX\": 3 }, { \"VOL\": \"exuberant-knot-47\", \"DEPART\": 33, \"DUREE\": 1, \"PRIX\": 9 }, { \"VOL\": \"shallow-tiller-11\", \"DEPART\": 32, \"DUREE\": 7, \"PRIX\": 9 }, { \"VOL\": \"excited-choir-43\", \"DEPART\": 33, \"DUREE\": 5, \"PRIX\": 7 }, { \"VOL\": \"scary-water-58\", \"DEPART\": 31, \"DUREE\": 4, \"PRIX\": 14 }, { \"VOL\": \"shy-orate-21\", \"DEPART\": 31, \"DUREE\": 11, \"PRIX\": 7 }, { \"VOL\": \"crazy-greens-98\", \"DEPART\": 38, \"DUREE\": 7, \"PRIX\": 30 }, { \"VOL\": \"victorious-sixshooter-47\", \"DEPART\": 35, \"DUREE\": 8, \"PRIX\": 23 }, { \"VOL\": \"mammoth-okra-56\", \"DEPART\": 35, \"DUREE\": 7, \"PRIX\": 8 }, { \"VOL\": \"small-skeleton-44\", \"DEPART\": 35, \"DUREE\": 5, \"PRIX\": 9 }, { \"VOL\": \"super-klutz-24\", \"DEPART\": 39, \"DUREE\": 9, \"PRIX\": 1 }, { \"VOL\": \"homely-registry-1\", \"DEPART\": 40, \"DUREE\": 3, \"PRIX\": 11 }, { \"VOL\": \"panicky-shrew-71\", \"DEPART\": 41, \"DUREE\": 10, \"PRIX\": 5 }, { \"VOL\": \"real-banking-34\", \"DEPART\": 42, \"DUREE\": 4, \"PRIX\": 7 }, { \"VOL\": \"elated-steamer-92\", \"DEPART\": 42, \"DUREE\": 5, \"PRIX\": 6 }, { \"VOL\": \"courageous-cereal-11\", \"DEPART\": 42, \"DUREE\": 7, \"PRIX\": 5 }, { \"VOL\": \"jealous-eyelid-12\", \"DEPART\": 48, \"DUREE\": 6, \"PRIX\": 9 }, { \"VOL\": \"crowded-vacation-78\", \"DEPART\": 48, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"voiceless-frost-8\", \"DEPART\": 49, \"DUREE\": 4, \"PRIX\": 6 }, { \"VOL\": \"scary-keyboard-10\", \"DEPART\": 46, \"DUREE\": 2, \"PRIX\": 8 }, { \"VOL\": \"jolly-cafeteria-41\", \"DEPART\": 45, \"DUREE\": 17, \"PRIX\": 6 }, { \"VOL\": \"melodic-wrench-5\", \"DEPART\": 51, \"DUREE\": 4, \"PRIX\": 1 }, { \"VOL\": \"screeching-refrigerator-9\", \"DEPART\": 51, \"DUREE\": 8, \"PRIX\": 20 }, { \"VOL\": \"deafening-maple-90\", \"DEPART\": 51, \"DUREE\": 5, \"PRIX\": 10 }, { \"VOL\": \"charming-youth-92\", \"DEPART\": 50, \"DUREE\": 4, \"PRIX\": 14 }, { \"VOL\": \"brainy-topcoat-24\", \"DEPART\": 54, \"DUREE\": 10, \"PRIX\": 4 }, { \"VOL\": \"embarrassed-geophysics-86\", \"DEPART\": 57, \"DUREE\": 2, \"PRIX\": 24 }, { \"VOL\": \"silent-pacemaker-2\", \"DEPART\": 59, \"DUREE\": 7, \"PRIX\": 17 }, { \"VOL\": \"zany-gelatin-66\", \"DEPART\": 57, \"DUREE\": 4, \"PRIX\": 5 }, { \"VOL\": \"smiling-flare-16\", \"DEPART\": 55, \"DUREE\": 6, \"PRIX\": 9 }, { \"VOL\": \"curved-papergirl-86\", \"DEPART\": 56, \"DUREE\": 19, \"PRIX\": 2 }, { \"VOL\": \"good-hoof-70\", \"DEPART\": 63, \"DUREE\": 7, \"PRIX\": 5 }, { \"VOL\": \"proud-bell-79\", \"DEPART\": 62, \"DUREE\": 10, \"PRIX\": 17 }, { \"VOL\": \"tame-blank-96\", \"DEPART\": 64, \"DUREE\": 1, \"PRIX\": 1 }, { \"VOL\": \"screeching-taster-1\", \"DEPART\": 61, \"DUREE\": 1, \"PRIX\": 9 }, { \"VOL\": \"poised-genius-6\", \"DEPART\": 61, \"DUREE\": 9, \"PRIX\": 2 }, { \"VOL\": \"lovely-blanket-59\", \"DEPART\": 67, \"DUREE\": 2, \"PRIX\": 27 }, { \"VOL\": \"energetic-vagrant-16\", \"DEPART\": 66, \"DUREE\": 9, \"PRIX\": 13 }, { \"VOL\": \"high-pitched-menthol-66\", \"DEPART\": 65, \"DUREE\": 3, \"PRIX\": 5 }, { \"VOL\": \"gifted-tenet-77\", \"DEPART\": 66, \"DUREE\": 10, \"PRIX\": 11 }, { \"VOL\": \"cautious-suds-75\", \"DEPART\": 66, \"DUREE\": 15, \"PRIX\": 5 }, { \"VOL\": \"testy-poltergeist-45\", \"DEPART\": 74, \"DUREE\": 3, \"PRIX\": 9 }, { \"VOL\": \"low-volt-2\", \"DEPART\": 72, \"DUREE\": 10, \"PRIX\": 14 }, { \"VOL\": \"courageous-ghost-58\", \"DEPART\": 73, \"DUREE\": 4, \"PRIX\": 10 }, { \"VOL\": \"encouraging-summer-55\", \"DEPART\": 74, \"DUREE\": 2, \"PRIX\": 15 }, { \"VOL\": \"glorious-warlord-88\", \"DEPART\": 70, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"motionless-sperm-88\", \"DEPART\": 75, \"DUREE\": 10, \"PRIX\": 26 }, { \"VOL\": \"huge-armrest-16\", \"DEPART\": 78, \"DUREE\": 4, \"PRIX\": 19 }, { \"VOL\": \"hungry-scatterbrain-41\", \"DEPART\": 77, \"DUREE\": 1, \"PRIX\": 2 }, { \"VOL\": \"gorgeous-star-76\", \"DEPART\": 77, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"grieving-skier-4\", \"DEPART\": 78, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"petite-insecticide-94\", \"DEPART\": 84, \"DUREE\": 7, \"PRIX\": 4 }, { \"VOL\": \"annoyed-bullet-18\", \"DEPART\": 83, \"DUREE\": 1, \"PRIX\": 12 }, { \"VOL\": \"shy-mining-38\", \"DEPART\": 82, \"DUREE\": 1, \"PRIX\": 8 }, { \"VOL\": \"excited-drink-52\", \"DEPART\": 83, \"DUREE\": 5, \"PRIX\": 9 }, { \"VOL\": \"lucky-hangman-35\", \"DEPART\": 81, \"DUREE\": 18, \"PRIX\": 4 }, { \"VOL\": \"large-dressmaker-24\", \"DEPART\": 87, \"DUREE\": 9, \"PRIX\": 8 }, { \"VOL\": \"muddy-switchhitter-77\", \"DEPART\": 86, \"DUREE\": 8, \"PRIX\": 22 }, { \"VOL\": \"ashamed-climber-8\", \"DEPART\": 89, \"DUREE\": 5, \"PRIX\": 3 }, { \"VOL\": \"hungry-giant-80\", \"DEPART\": 87, \"DUREE\": 7, \"PRIX\": 12 }, { \"VOL\": \"sore-sunbather-33\", \"DEPART\": 86, \"DUREE\": 9, \"PRIX\": 2 }, { \"VOL\": \"jealous-porter-48\", \"DEPART\": 91, \"DUREE\": 2, \"PRIX\": 3 }, { \"VOL\": \"Early-squeegee-6\", \"DEPART\": 92, \"DUREE\": 3, \"PRIX\": 5 }, { \"VOL\": \"embarrassed-cook-58\", \"DEPART\": 91, \"DUREE\": 9, \"PRIX\": 9 }, { \"VOL\": \"zealous-shellfish-52\", \"DEPART\": 91, \"DUREE\": 7, \"PRIX\": 10 }, { \"VOL\": \"poised-fatigues-10\", \"DEPART\": 90, \"DUREE\": 20, \"PRIX\": 1 }, { \"VOL\": \"ill-fork-26\", \"DEPART\": 96, \"DUREE\": 5, \"PRIX\": 16 }, { \"VOL\": \"dark-sonar-42\", \"DEPART\": 98, \"DUREE\": 2, \"PRIX\": 14 }, { \"VOL\": \"smoggy-vogue-91\", \"DEPART\": 95, \"DUREE\": 7, \"PRIX\": 2 }, { \"VOL\": \"tough-fudge-21\", \"DEPART\": 98, \"DUREE\": 3, \"PRIX\": 11 }, { \"VOL\": \"tough-veterinarian-60\", \"DEPART\": 95, \"DUREE\": 3, \"PRIX\": 3 }, { \"VOL\": \"hissing-putter-27\", \"DEPART\": 100, \"DUREE\": 6, \"PRIX\": 20 }, { \"VOL\": \"innocent-bead-76\", \"DEPART\": 101, \"DUREE\": 10, \"PRIX\": 11 }, { \"VOL\": \"successful-reactivation-71\", \"DEPART\": 103, \"DUREE\": 2, \"PRIX\": 4 }, { \"VOL\": \"glamorous-motheaten-63\", \"DEPART\": 104, \"DUREE\": 7, \"PRIX\": 8 }, { \"VOL\": \"annoying-unicycle-40\", \"DEPART\": 100, \"DUREE\": 3, \"PRIX\": 6 }, { \"VOL\": \"pleasant-gout-63\", \"DEPART\": 107, \"DUREE\": 1, \"PRIX\": 11 }, { \"VOL\": \"impossible-gentry-62\", \"DEPART\": 109, \"DUREE\": 1, \"PRIX\": 14 }, { \"VOL\": \"famous-schoolgirl-85\", \"DEPART\": 105, \"DUREE\": 8, \"PRIX\": 3 }, { \"VOL\": \"naughty-triceps-9\", \"DEPART\": 108, \"DUREE\": 10, \"PRIX\": 10 }, { \"VOL\": \"ugliest-timer-52\", \"DEPART\": 106, \"DUREE\": 19, \"PRIX\": 6 }, { \"VOL\": \"puzzled-sheep-19\", \"DEPART\": 111, \"DUREE\": 9, \"PRIX\": 30 }, { \"VOL\": \"straight-explorer-75\", \"DEPART\": 111, \"DUREE\": 2, \"PRIX\": 11 }, { \"VOL\": \"resonant-manic-37\", \"DEPART\": 113, \"DUREE\": 3, \"PRIX\": 9 }, { \"VOL\": \"perfect-freezer-71\", \"DEPART\": 111, \"DUREE\": 7, \"PRIX\": 8 }, { \"VOL\": \"distinct-pluto-44\", \"DEPART\": 113, \"DUREE\": 16, \"PRIX\": 3 }, { \"VOL\": \"real-sand-91\", \"DEPART\": 115, \"DUREE\": 4, \"PRIX\": 7 }, { \"VOL\": \"combative-yardstick-75\", \"DEPART\": 118, \"DUREE\": 1, \"PRIX\": 4 }, { \"VOL\": \"filthy-realtor-40\", \"DEPART\": 116, \"DUREE\": 5, \"PRIX\": 7 }, { \"VOL\": \"late-railroad-8\", \"DEPART\": 117, \"DUREE\": 8, \"PRIX\": 7 }, { \"VOL\": \"sore-crawfish-33\", \"DEPART\": 115, \"DUREE\": 9, \"PRIX\": 5 }, { \"VOL\": \"determined-wishbone-86\", \"DEPART\": 124, \"DUREE\": 6, \"PRIX\": 30 }, { \"VOL\": \"cooing-scapegoat-54\", \"DEPART\": 124, \"DUREE\": 10, \"PRIX\": 4 }, { \"VOL\": \"homely-windburn-18\", \"DEPART\": 121, \"DUREE\": 9, \"PRIX\": 4 }, { \"VOL\": \"thankful-tomcat-41\", \"DEPART\": 120, \"DUREE\": 7, \"PRIX\": 12 }, { \"VOL\": \"ugly-refrigerator-64\", \"DEPART\": 121, \"DUREE\": 19, \"PRIX\": 5 }, { \"VOL\": \"puny-telescope-77\", \"DEPART\": 127, \"DUREE\": 2, \"PRIX\": 7 }, { \"VOL\": \"lucky-treachery-99\", \"DEPART\": 129, \"DUREE\": 4, \"PRIX\": 7 }, { \"VOL\": \"ill-stepparent-62\", \"DEPART\": 129, \"DUREE\": 4, \"PRIX\": 1 }, { \"VOL\": \"beautiful-prodigy-26\", \"DEPART\": 129, \"DUREE\": 5, \"PRIX\": 13 }, { \"VOL\": \"dizzy-electrician-43\", \"DEPART\": 127, \"DUREE\": 17, \"PRIX\": 2 }, { \"VOL\": \"resonant-coffin-27\", \"DEPART\": 133, \"DUREE\": 10, \"PRIX\": 1 }, { \"VOL\": \"crazy-beast-41\", \"DEPART\": 134, \"DUREE\": 3, \"PRIX\": 13 }, { \"VOL\": \"important-pope-19\", \"DEPART\": 130, \"DUREE\": 9, \"PRIX\": 9 }, { \"VOL\": \"adventurous-surgeon-84\", \"DEPART\": 130, \"DUREE\": 8, \"PRIX\": 10 }, { \"VOL\": \"pleasant-sunset-23\", \"DEPART\": 130, \"DUREE\": 2, \"PRIX\": 4 }, { \"VOL\": \"whispering-heroin-53\", \"DEPART\": 136, \"DUREE\": 7, \"PRIX\": 16 }, { \"VOL\": \"eager-alphabet-69\", \"DEPART\": 137, \"DUREE\": 7, \"PRIX\": 23 }, { \"VOL\": \"glorious-whiskey-87\", \"DEPART\": 137, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"delightful-sickbed-42\", \"DEPART\": 139, \"DUREE\": 9, \"PRIX\": 11 }, { \"VOL\": \"inexpensive-chair-74\", \"DEPART\": 135, \"DUREE\": 18, \"PRIX\": 7 }, { \"VOL\": \"petite-rattlesnake-24\", \"DEPART\": 142, \"DUREE\": 5, \"PRIX\": 1 }, { \"VOL\": \"panicky-soapbox-74\", \"DEPART\": 142, \"DUREE\": 6, \"PRIX\": 5 }, { \"VOL\": \"immense-lounge-95\", \"DEPART\": 140, \"DUREE\": 8, \"PRIX\": 4 }, { \"VOL\": \"victorious-knee-72\", \"DEPART\": 144, \"DUREE\": 8, \"PRIX\": 7 }, { \"VOL\": \"precious-grasshopper-77\", \"DEPART\": 142, \"DUREE\": 4, \"PRIX\": 1 }, { \"VOL\": \"cooperative-goatee-73\", \"DEPART\": 148, \"DUREE\": 2, \"PRIX\": 6 }, { \"VOL\": \"tall-sadness-73\", \"DEPART\": 147, \"DUREE\": 4, \"PRIX\": 17 }, { \"VOL\": \"high-pitched-numskull-65\", \"DEPART\": 145, \"DUREE\": 9, \"PRIX\": 8 }, { \"VOL\": \"helpless-sprawl-45\", \"DEPART\": 147, \"DUREE\": 5, \"PRIX\": 15 }, { \"VOL\": \"defeated-roundworm-78\", \"DEPART\": 146, \"DUREE\": 10, \"PRIX\": 2 }, { \"VOL\": \"embarrassed-furnace-98\", \"DEPART\": 150, \"DUREE\": 2, \"PRIX\": 15 }, { \"VOL\": \"jealous-minibike-31\", \"DEPART\": 154, \"DUREE\": 5, \"PRIX\": 4 }, { \"VOL\": \"disgusted-tungsten-11\", \"DEPART\": 151, \"DUREE\": 9, \"PRIX\": 6 }, { \"VOL\": \"old-cowgirl-27\", \"DEPART\": 150, \"DUREE\": 8, \"PRIX\": 14 }, { \"VOL\": \"silly-plasterboard-47\", \"DEPART\": 150, \"DUREE\": 20, \"PRIX\": 4 }, { \"VOL\": \"sore-swimmer-73\", \"DEPART\": 156, \"DUREE\": 10, \"PRIX\": 24 }, { \"VOL\": \"rapid-segregation-3\", \"DEPART\": 159, \"DUREE\": 5, \"PRIX\": 20 }, { \"VOL\": \"frightened-driveway-85\", \"DEPART\": 158, \"DUREE\": 6, \"PRIX\": 3 }, { \"VOL\": \"shy-heart-22\", \"DEPART\": 157, \"DUREE\": 3, \"PRIX\": 15 }, { \"VOL\": \"zealous-jackpot-35\", \"DEPART\": 159, \"DUREE\": 12, \"PRIX\": 6 }, { \"VOL\": \"shrill-mandrake-18\", \"DEPART\": 164, \"DUREE\": 8, \"PRIX\": 14 }, { \"VOL\": \"little-strap-91\", \"DEPART\": 162, \"DUREE\": 7, \"PRIX\": 12 }, { \"VOL\": \"fair-quadriplegic-66\", \"DEPART\": 163, \"DUREE\": 6, \"PRIX\": 2 }, { \"VOL\": \"expensive-vender-36\", \"DEPART\": 161, \"DUREE\": 2, \"PRIX\": 14 }, { \"VOL\": \"concerned-back-29\", \"DEPART\": 164, \"DUREE\": 11, \"PRIX\": 7 }, { \"VOL\": \"tame-ghetto-90\", \"DEPART\": 166, \"DUREE\": 5, \"PRIX\": 14 }, { \"VOL\": \"thoughtful-tutorial-97\", \"DEPART\": 167, \"DUREE\": 3, \"PRIX\": 10 }, { \"VOL\": \"relieved-sometimes-69\", \"DEPART\": 166, \"DUREE\": 9, \"PRIX\": 10 }, { \"VOL\": \"thoughtful-stockyard-23\", \"DEPART\": 168, \"DUREE\": 2, \"PRIX\": 7 }, { \"VOL\": \"anxious-idiot-45\", \"DEPART\": 168, \"DUREE\": 17, \"PRIX\": 3 }, { \"VOL\": \"puzzled-fatigues-8\", \"DEPART\": 171, \"DUREE\": 4, \"PRIX\": 14 }, { \"VOL\": \"comfortable-wharf-98\", \"DEPART\": 171, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"wrong-tomb-82\", \"DEPART\": 172, \"DUREE\": 1, \"PRIX\": 3 }, { \"VOL\": \"gifted-tray-4\", \"DEPART\": 170, \"DUREE\": 9, \"PRIX\": 7 }, { \"VOL\": \"dark-whisk-16\", \"DEPART\": 171, \"DUREE\": 9, \"PRIX\": 7 }, { \"VOL\": \"puzzled-condo-19\", \"DEPART\": 176, \"DUREE\": 7, \"PRIX\": 20 }, { \"VOL\": \"flat-bus-94\", \"DEPART\": 179, \"DUREE\": 3, \"PRIX\": 11 }, { \"VOL\": \"chubby-pilgrim-55\", \"DEPART\": 176, \"DUREE\": 3, \"PRIX\": 2 }, { \"VOL\": \"soft-signal-85\", \"DEPART\": 178, \"DUREE\": 7, \"PRIX\": 13 }, { \"VOL\": \"innocent-dingo-67\", \"DEPART\": 178, \"DUREE\": 12, \"PRIX\": 5 }, { \"VOL\": \"deafening-explorer-47\", \"DEPART\": 181, \"DUREE\": 5, \"PRIX\": 17 }, { \"VOL\": \"outrageous-fullback-29\", \"DEPART\": 181, \"DUREE\": 9, \"PRIX\": 10 }, { \"VOL\": \"quick-verdict-83\", \"DEPART\": 181, \"DUREE\": 6, \"PRIX\": 9 }, { \"VOL\": \"distinct-groundhog-60\", \"DEPART\": 184, \"DUREE\": 2, \"PRIX\": 13 }, { \"VOL\": \"obnoxious-hitch-84\", \"DEPART\": 184, \"DUREE\": 3, \"PRIX\": 5 }, { \"VOL\": \"glamorous-bow-30\", \"DEPART\": 189, \"DUREE\": 3, \"PRIX\": 18 }, { \"VOL\": \"vast-driveway-61\", \"DEPART\": 185, \"DUREE\": 2, \"PRIX\": 7 }, { \"VOL\": \"frightened-pliers-13\", \"DEPART\": 187, \"DUREE\": 2, \"PRIX\": 2 }, { \"VOL\": \"flipped-out-youth-92\", \"DEPART\": 189, \"DUREE\": 1, \"PRIX\": 12 }, { \"VOL\": \"victorious-victor-99\", \"DEPART\": 188, \"DUREE\": 18, \"PRIX\": 3 }, { \"VOL\": \"enchanting-scaffolding-89\", \"DEPART\": 190, \"DUREE\": 8, \"PRIX\": 14 }, { \"VOL\": \"short-tablespoon-90\", \"DEPART\": 191, \"DUREE\": 1, \"PRIX\": 16 }, { \"VOL\": \"different-leakage-90\", \"DEPART\": 194, \"DUREE\": 9, \"PRIX\": 9 }, { \"VOL\": \"envious-thump-26\", \"DEPART\": 191, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"inexpensive-stalemate-82\", \"DEPART\": 191, \"DUREE\": 12, \"PRIX\": 7 }, { \"VOL\": \"fast-bassoon-98\", \"DEPART\": 199, \"DUREE\": 1, \"PRIX\": 15 }, { \"VOL\": \"wonderful-train-19\", \"DEPART\": 199, \"DUREE\": 9, \"PRIX\": 8 }, { \"VOL\": \"fragile-ballet-62\", \"DEPART\": 198, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"young-nittygritty-91\", \"DEPART\": 198, \"DUREE\": 1, \"PRIX\": 13 }, { \"VOL\": \"lonely-missile-84\", \"DEPART\": 195, \"DUREE\": 14, \"PRIX\": 4 }, { \"VOL\": \"adorable-music-96\", \"DEPART\": 200, \"DUREE\": 4, \"PRIX\": 19 }, { \"VOL\": \"fair-spaciousness-47\", \"DEPART\": 204, \"DUREE\": 9, \"PRIX\": 21 }, { \"VOL\": \"beautiful-fireman-24\", \"DEPART\": 203, \"DUREE\": 9, \"PRIX\": 3 }, { \"VOL\": \"thoughtful-sortie-40\", \"DEPART\": 203, \"DUREE\": 7, \"PRIX\": 6 }, { \"VOL\": \"harsh-royalty-4\", \"DEPART\": 204, \"DUREE\": 11, \"PRIX\": 4 }, { \"VOL\": \"terrible-scout-15\", \"DEPART\": 209, \"DUREE\": 7, \"PRIX\": 23 }, { \"VOL\": \"hurt-organ-56\", \"DEPART\": 206, \"DUREE\": 2, \"PRIX\": 6 }, { \"VOL\": \"adventurous-cow-58\", \"DEPART\": 209, \"DUREE\": 2, \"PRIX\": 10 }, { \"VOL\": \"lazy-barbiturate-61\", \"DEPART\": 207, \"DUREE\": 10, \"PRIX\": 13 }, { \"VOL\": \"healthy-slug-80\", \"DEPART\": 209, \"DUREE\": 10, \"PRIX\": 3 }, { \"VOL\": \"puzzled-polyester-93\", \"DEPART\": 212, \"DUREE\": 10, \"PRIX\": 29 }, { \"VOL\": \"long-midget-95\", \"DEPART\": 213, \"DUREE\": 10, \"PRIX\": 23 }, { \"VOL\": \"smiling-rake-14\", \"DEPART\": 214, \"DUREE\": 9, \"PRIX\": 3 }, { \"VOL\": \"wandering-receipt-25\", \"DEPART\": 213, \"DUREE\": 6, \"PRIX\": 14 }, { \"VOL\": \"bewildered-raise-63\", \"DEPART\": 214, \"DUREE\": 16, \"PRIX\": 6 }, { \"VOL\": \"huge-minefield-46\", \"DEPART\": 219, \"DUREE\": 6, \"PRIX\": 17 }, { \"VOL\": \"rich-matchmaker-69\", \"DEPART\": 219, \"DUREE\": 7, \"PRIX\": 12 }, { \"VOL\": \"selfish-switchboard-98\", \"DEPART\": 217, \"DUREE\": 2, \"PRIX\": 6 }, { \"VOL\": \"hollow-jellybean-68\", \"DEPART\": 218, \"DUREE\": 5, \"PRIX\": 12 }, { \"VOL\": \"stupid-schoolyard-9\", \"DEPART\": 216, \"DUREE\": 2, \"PRIX\": 2 }, { \"VOL\": \"lonely-stepfather-2\", \"DEPART\": 220, \"DUREE\": 10, \"PRIX\": 17 }, { \"VOL\": \"tiny-website-84\", \"DEPART\": 220, \"DUREE\": 1, \"PRIX\": 16 }, { \"VOL\": \"teeny-babushka-92\", \"DEPART\": 221, \"DUREE\": 5, \"PRIX\": 5 }, { \"VOL\": \"tired-jail-35\", \"DEPART\": 222, \"DUREE\": 1, \"PRIX\": 15 }, { \"VOL\": \"mushy-smooch-8\", \"DEPART\": 221, \"DUREE\": 9, \"PRIX\": 1 }, { \"VOL\": \"tame-cornmeal-25\", \"DEPART\": 226, \"DUREE\": 5, \"PRIX\": 14 }, { \"VOL\": \"concerned-volunteer-90\", \"DEPART\": 226, \"DUREE\": 8, \"PRIX\": 9 }, { \"VOL\": \"bored-weasel-24\", \"DEPART\": 229, \"DUREE\": 9, \"PRIX\": 3 }, { \"VOL\": \"rapid-cocktail-39\", \"DEPART\": 225, \"DUREE\": 4, \"PRIX\": 8 }, { \"VOL\": \"terrible-posy-8\", \"DEPART\": 226, \"DUREE\": 3, \"PRIX\": 4 }, { \"VOL\": \"precious-railroad-61\", \"DEPART\": 232, \"DUREE\": 8, \"PRIX\": 29 }, { \"VOL\": \"attractive-landscape-73\", \"DEPART\": 232, \"DUREE\": 6, \"PRIX\": 14 }, { \"VOL\": \"embarrassed-chair-67\", \"DEPART\": 231, \"DUREE\": 10, \"PRIX\": 1 }, { \"VOL\": \"naughty-twig-30\", \"DEPART\": 233, \"DUREE\": 10, \"PRIX\": 6 }, { \"VOL\": \"clumsy-pillow-57\", \"DEPART\": 230, \"DUREE\": 14, \"PRIX\": 4 }, { \"VOL\": \"puny-giant-84\", \"DEPART\": 239, \"DUREE\": 4, \"PRIX\": 5 }, { \"VOL\": \"tall-easel-39\", \"DEPART\": 239, \"DUREE\": 4, \"PRIX\": 17 }, { \"VOL\": \"dangerous-troll-76\", \"DEPART\": 236, \"DUREE\": 8, \"PRIX\": 2 }, { \"VOL\": \"melodic-criminal-67\", \"DEPART\": 236, \"DUREE\": 10, \"PRIX\": 14 }, { \"VOL\": \"angry-beggar-54\", \"DEPART\": 238, \"DUREE\": 14, \"PRIX\": 4 }, { \"VOL\": \"puzzled-sorcery-32\", \"DEPART\": 240, \"DUREE\": 7, \"PRIX\": 17 }, { \"VOL\": \"dark-rim-32\", \"DEPART\": 241, \"DUREE\": 8, \"PRIX\": 20 }, { \"VOL\": \"stupid-incense-43\", \"DEPART\": 242, \"DUREE\": 8, \"PRIX\": 6 }, { \"VOL\": \"innocent-door-97\", \"DEPART\": 240, \"DUREE\": 8, \"PRIX\": 13 }, { \"VOL\": \"tough-nosebleed-72\", \"DEPART\": 242, \"DUREE\": 16, \"PRIX\": 6 }, { \"VOL\": \"thankful-lambaste-76\", \"DEPART\": 246, \"DUREE\": 9, \"PRIX\": 7 }, { \"VOL\": \"bewildered-windfall-79\", \"DEPART\": 247, \"DUREE\": 3, \"PRIX\": 12 }, { \"VOL\": \"muddy-screenwriter-55\", \"DEPART\": 246, \"DUREE\": 10, \"PRIX\": 7 }, { \"VOL\": \"tired-penknife-78\", \"DEPART\": 248, \"DUREE\": 4, \"PRIX\": 7 }, { \"VOL\": \"rich-rabbit-37\", \"DEPART\": 245, \"DUREE\": 6, \"PRIX\": 7 } ]"
    val expected = "{\"gain\":788,\"path\":[\"beautiful-smoothness-46\",\"hilarious-sample-30\",\"fast-electricity-59\",\"swift-sociology-45\",\"dull-metal-30\",\"uptight-meatloaf-33\",\"scary-water-58\",\"crazy-greens-98\",\"scary-keyboard-10\",\"crowded-vacation-78\",\"deafening-maple-90\",\"embarrassed-geophysics-86\",\"silent-pacemaker-2\",\"lovely-blanket-59\",\"encouraging-summer-55\",\"hungry-scatterbrain-41\",\"huge-armrest-16\",\"shy-mining-38\",\"annoyed-bullet-18\",\"muddy-switchhitter-77\",\"tough-veterinarian-60\",\"dark-sonar-42\",\"hissing-putter-27\",\"pleasant-gout-63\",\"impossible-gentry-62\",\"puzzled-sheep-19\",\"determined-wishbone-86\",\"pleasant-sunset-23\",\"crazy-beast-41\",\"eager-alphabet-69\",\"cooperative-goatee-73\",\"embarrassed-furnace-98\",\"shy-heart-22\",\"expensive-vender-36\",\"tame-ghetto-90\",\"puzzled-fatigues-8\",\"puzzled-condo-19\",\"distinct-groundhog-60\",\"frightened-pliers-13\",\"flipped-out-youth-92\",\"short-tablespoon-90\",\"young-nittygritty-91\",\"fast-bassoon-98\",\"adorable-music-96\",\"fair-spaciousness-47\",\"wandering-receipt-25\",\"tiny-website-84\",\"tired-jail-35\",\"tame-cornmeal-25\",\"precious-railroad-61\",\"puzzled-sorcery-32\",\"bewildered-windfall-79\"]}"
    assert(expected === optimize(json))
  }

  test("150 requests") {
    val json = "[ { \"VOL\": \"vivacious-jawbone-43\", \"DEPART\": 0, \"DUREE\": 7, \"PRIX\": 9 }, { \"VOL\": \"dull-destroyer-25\", \"DEPART\": 4, \"DUREE\": 3, \"PRIX\": 13 }, { \"VOL\": \"gifted-teammate-64\", \"DEPART\": 2, \"DUREE\": 5, \"PRIX\": 7 }, { \"VOL\": \"high-scoutmaster-39\", \"DEPART\": 1, \"DUREE\": 1, \"PRIX\": 11 }, { \"VOL\": \"large-sneaker-53\", \"DEPART\": 4, \"DUREE\": 4, \"PRIX\": 4 }, { \"VOL\": \"nutty-antenna-66\", \"DEPART\": 9, \"DUREE\": 6, \"PRIX\": 9 }, { \"VOL\": \"cheerful-bookcase-64\", \"DEPART\": 8, \"DUREE\": 6, \"PRIX\": 12 }, { \"VOL\": \"nasty-sidearm-15\", \"DEPART\": 8, \"DUREE\": 1, \"PRIX\": 8 }, { \"VOL\": \"big-spareribs-66\", \"DEPART\": 9, \"DUREE\": 7, \"PRIX\": 12 }, { \"VOL\": \"naughty-storehouse-26\", \"DEPART\": 7, \"DUREE\": 2, \"PRIX\": 6 }, { \"VOL\": \"confused-juicer-48\", \"DEPART\": 10, \"DUREE\": 1, \"PRIX\": 30 }, { \"VOL\": \"melodic-windshield-74\", \"DEPART\": 13, \"DUREE\": 10, \"PRIX\": 19 }, { \"VOL\": \"raspy-power-43\", \"DEPART\": 14, \"DUREE\": 3, \"PRIX\": 9 }, { \"VOL\": \"long-picture-20\", \"DEPART\": 12, \"DUREE\": 7, \"PRIX\": 13 }, { \"VOL\": \"nice-strand-40\", \"DEPART\": 12, \"DUREE\": 2, \"PRIX\": 2 }, { \"VOL\": \"crooked-unicycle-10\", \"DEPART\": 15, \"DUREE\": 5, \"PRIX\": 14 }, { \"VOL\": \"straight-photographer-42\", \"DEPART\": 16, \"DUREE\": 10, \"PRIX\": 9 }, { \"VOL\": \"massive-patio-59\", \"DEPART\": 17, \"DUREE\": 7, \"PRIX\": 1 }, { \"VOL\": \"raspy-cookie-73\", \"DEPART\": 18, \"DUREE\": 10, \"PRIX\": 8 }, { \"VOL\": \"high-pitched-peppercorn-80\", \"DEPART\": 17, \"DUREE\": 20, \"PRIX\": 2 }, { \"VOL\": \"hollow-oaf-72\", \"DEPART\": 20, \"DUREE\": 5, \"PRIX\": 26 }, { \"VOL\": \"depressed-toe-16\", \"DEPART\": 23, \"DUREE\": 10, \"PRIX\": 22 }, { \"VOL\": \"shy-mandible-27\", \"DEPART\": 24, \"DUREE\": 7, \"PRIX\": 6 }, { \"VOL\": \"homely-rascal-76\", \"DEPART\": 24, \"DUREE\": 3, \"PRIX\": 8 }, { \"VOL\": \"selfish-underclothing-46\", \"DEPART\": 23, \"DUREE\": 2, \"PRIX\": 7 }, { \"VOL\": \"clear-chauffeur-87\", \"DEPART\": 27, \"DUREE\": 4, \"PRIX\": 13 }, { \"VOL\": \"fragile-sailor-70\", \"DEPART\": 26, \"DUREE\": 10, \"PRIX\": 15 }, { \"VOL\": \"lively-chest-68\", \"DEPART\": 25, \"DUREE\": 4, \"PRIX\": 8 }, { \"VOL\": \"concerned-fridge-61\", \"DEPART\": 26, \"DUREE\": 3, \"PRIX\": 13 }, { \"VOL\": \"uninterested-furnace-44\", \"DEPART\": 29, \"DUREE\": 8, \"PRIX\": 2 }, { \"VOL\": \"frail-sauerkraut-23\", \"DEPART\": 31, \"DUREE\": 7, \"PRIX\": 28 }, { \"VOL\": \"high-pitched-stepson-98\", \"DEPART\": 32, \"DUREE\": 7, \"PRIX\": 18 }, { \"VOL\": \"gentle-squid-18\", \"DEPART\": 34, \"DUREE\": 2, \"PRIX\": 3 }, { \"VOL\": \"colossal-gemstone-58\", \"DEPART\": 30, \"DUREE\": 7, \"PRIX\": 14 }, { \"VOL\": \"unusual-spaceship-35\", \"DEPART\": 32, \"DUREE\": 7, \"PRIX\": 1 }, { \"VOL\": \"thankful-rawhide-68\", \"DEPART\": 38, \"DUREE\": 4, \"PRIX\": 24 }, { \"VOL\": \"courageous-fluoride-69\", \"DEPART\": 39, \"DUREE\": 1, \"PRIX\": 18 }, { \"VOL\": \"bad-mafia-70\", \"DEPART\": 36, \"DUREE\": 5, \"PRIX\": 8 }, { \"VOL\": \"muddy-pluto-23\", \"DEPART\": 39, \"DUREE\": 2, \"PRIX\": 9 }, { \"VOL\": \"annoyed-ulcer-27\", \"DEPART\": 36, \"DUREE\": 12, \"PRIX\": 7 }, { \"VOL\": \"cooperative-numerical-89\", \"DEPART\": 42, \"DUREE\": 6, \"PRIX\": 14 }, { \"VOL\": \"lively-ax-99\", \"DEPART\": 41, \"DUREE\": 4, \"PRIX\": 12 }, { \"VOL\": \"vast-quadrilateral-13\", \"DEPART\": 42, \"DUREE\": 9, \"PRIX\": 9 }, { \"VOL\": \"scary-simplicity-61\", \"DEPART\": 42, \"DUREE\": 10, \"PRIX\": 13 }, { \"VOL\": \"magnificent-savanna-37\", \"DEPART\": 43, \"DUREE\": 14, \"PRIX\": 5 }, { \"VOL\": \"moaning-plantation-76\", \"DEPART\": 49, \"DUREE\": 6, \"PRIX\": 22 }, { \"VOL\": \"awful-salesclerk-4\", \"DEPART\": 49, \"DUREE\": 4, \"PRIX\": 19 }, { \"VOL\": \"late-graphics-56\", \"DEPART\": 49, \"DUREE\": 9, \"PRIX\": 4 }, { \"VOL\": \"clean-spa-17\", \"DEPART\": 48, \"DUREE\": 10, \"PRIX\": 9 }, { \"VOL\": \"modern-rhinoceros-23\", \"DEPART\": 47, \"DUREE\": 17, \"PRIX\": 3 }, { \"VOL\": \"glamorous-weekend-60\", \"DEPART\": 54, \"DUREE\": 7, \"PRIX\": 2 }, { \"VOL\": \"doubtful-switchboard-88\", \"DEPART\": 50, \"DUREE\": 4, \"PRIX\": 14 }, { \"VOL\": \"drab-timepiece-87\", \"DEPART\": 51, \"DUREE\": 7, \"PRIX\": 3 }, { \"VOL\": \"ugliest-treasurer-25\", \"DEPART\": 53, \"DUREE\": 7, \"PRIX\": 11 }, { \"VOL\": \"calm-urchin-29\", \"DEPART\": 53, \"DUREE\": 16, \"PRIX\": 1 }, { \"VOL\": \"helpless-hairstyle-63\", \"DEPART\": 55, \"DUREE\": 7, \"PRIX\": 3 }, { \"VOL\": \"sleepy-tiger-49\", \"DEPART\": 57, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"joyous-seaport-80\", \"DEPART\": 56, \"DUREE\": 6, \"PRIX\": 7 }, { \"VOL\": \"quick-yam-88\", \"DEPART\": 56, \"DUREE\": 5, \"PRIX\": 13 }, { \"VOL\": \"frightened-sheriff-71\", \"DEPART\": 58, \"DUREE\": 4, \"PRIX\": 1 }, { \"VOL\": \"nasty-whistleblower-32\", \"DEPART\": 60, \"DUREE\": 9, \"PRIX\": 14 }, { \"VOL\": \"unusual-virtue-74\", \"DEPART\": 61, \"DUREE\": 7, \"PRIX\": 4 }, { \"VOL\": \"soft-noblewoman-44\", \"DEPART\": 63, \"DUREE\": 4, \"PRIX\": 6 }, { \"VOL\": \"zealous-grapevine-97\", \"DEPART\": 64, \"DUREE\": 5, \"PRIX\": 12 }, { \"VOL\": \"mysterious-fowl-12\", \"DEPART\": 60, \"DUREE\": 10, \"PRIX\": 1 }, { \"VOL\": \"envious-shoeshine-76\", \"DEPART\": 67, \"DUREE\": 9, \"PRIX\": 16 }, { \"VOL\": \"powerful-garden-7\", \"DEPART\": 69, \"DUREE\": 5, \"PRIX\": 6 }, { \"VOL\": \"tired-staffer-2\", \"DEPART\": 66, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"zealous-refrigeration-55\", \"DEPART\": 68, \"DUREE\": 9, \"PRIX\": 12 }, { \"VOL\": \"whispering-alcohol-61\", \"DEPART\": 66, \"DUREE\": 8, \"PRIX\": 4 }, { \"VOL\": \"jittery-bumper-63\", \"DEPART\": 74, \"DUREE\": 9, \"PRIX\": 1 }, { \"VOL\": \"uninterested-store-75\", \"DEPART\": 70, \"DUREE\": 6, \"PRIX\": 5 }, { \"VOL\": \"tired-matchbox-5\", \"DEPART\": 71, \"DUREE\": 6, \"PRIX\": 7 }, { \"VOL\": \"muddy-vignette-34\", \"DEPART\": 70, \"DUREE\": 10, \"PRIX\": 9 }, { \"VOL\": \"steep-beekeeper-56\", \"DEPART\": 72, \"DUREE\": 7, \"PRIX\": 2 }, { \"VOL\": \"dull-gunboat-48\", \"DEPART\": 77, \"DUREE\": 8, \"PRIX\": 4 }, { \"VOL\": \"envious-honeybee-68\", \"DEPART\": 75, \"DUREE\": 9, \"PRIX\": 11 }, { \"VOL\": \"gorgeous-scorpio-17\", \"DEPART\": 76, \"DUREE\": 2, \"PRIX\": 10 }, { \"VOL\": \"bright-index-57\", \"DEPART\": 77, \"DUREE\": 4, \"PRIX\": 8 }, { \"VOL\": \"terrible-orchid-10\", \"DEPART\": 77, \"DUREE\": 7, \"PRIX\": 3 }, { \"VOL\": \"thundering-treble-18\", \"DEPART\": 84, \"DUREE\": 4, \"PRIX\": 21 }, { \"VOL\": \"combative-rayon-79\", \"DEPART\": 80, \"DUREE\": 10, \"PRIX\": 23 }, { \"VOL\": \"confused-dashboard-35\", \"DEPART\": 84, \"DUREE\": 6, \"PRIX\": 2 }, { \"VOL\": \"misty-jackhammer-71\", \"DEPART\": 83, \"DUREE\": 10, \"PRIX\": 15 }, { \"VOL\": \"narrow-mission-41\", \"DEPART\": 84, \"DUREE\": 15, \"PRIX\": 2 }, { \"VOL\": \"puzzled-wimp-48\", \"DEPART\": 88, \"DUREE\": 6, \"PRIX\": 20 }, { \"VOL\": \"clever-saliva-42\", \"DEPART\": 89, \"DUREE\": 9, \"PRIX\": 14 }, { \"VOL\": \"steep-rumba-36\", \"DEPART\": 85, \"DUREE\": 10, \"PRIX\": 2 }, { \"VOL\": \"wandering-rye-71\", \"DEPART\": 88, \"DUREE\": 6, \"PRIX\": 12 }, { \"VOL\": \"sore-spitball-83\", \"DEPART\": 89, \"DUREE\": 2, \"PRIX\": 5 }, { \"VOL\": \"shy-mouser-44\", \"DEPART\": 91, \"DUREE\": 9, \"PRIX\": 23 }, { \"VOL\": \"mammoth-violet-17\", \"DEPART\": 91, \"DUREE\": 8, \"PRIX\": 17 }, { \"VOL\": \"voiceless-fibula-44\", \"DEPART\": 93, \"DUREE\": 5, \"PRIX\": 4 }, { \"VOL\": \"terrible-rival-96\", \"DEPART\": 93, \"DUREE\": 6, \"PRIX\": 14 }, { \"VOL\": \"alert-*-51\", \"DEPART\": 94, \"DUREE\": 16, \"PRIX\": 1 }, { \"VOL\": \"shallow-photo-54\", \"DEPART\": 98, \"DUREE\": 6, \"PRIX\": 22 }, { \"VOL\": \"handsome-squirrel-1\", \"DEPART\": 99, \"DUREE\": 1, \"PRIX\": 17 }, { \"VOL\": \"condemned-minion-77\", \"DEPART\": 95, \"DUREE\": 10, \"PRIX\": 10 }, { \"VOL\": \"low-trefoil-47\", \"DEPART\": 98, \"DUREE\": 1, \"PRIX\": 10 }, { \"VOL\": \"thoughtful-janitor-96\", \"DEPART\": 96, \"DUREE\": 11, \"PRIX\": 4 }, { \"VOL\": \"quaint-image-98\", \"DEPART\": 101, \"DUREE\": 5, \"PRIX\": 29 }, { \"VOL\": \"homeless-plant-21\", \"DEPART\": 100, \"DUREE\": 10, \"PRIX\": 8 }, { \"VOL\": \"modern-ballerina-5\", \"DEPART\": 100, \"DUREE\": 3, \"PRIX\": 3 }, { \"VOL\": \"dull-rumba-14\", \"DEPART\": 102, \"DUREE\": 6, \"PRIX\": 11 }, { \"VOL\": \"puny-curl-45\", \"DEPART\": 102, \"DUREE\": 2, \"PRIX\": 1 }, { \"VOL\": \"creepy-villa-63\", \"DEPART\": 107, \"DUREE\": 5, \"PRIX\": 26 }, { \"VOL\": \"uninterested-scoop-65\", \"DEPART\": 106, \"DUREE\": 9, \"PRIX\": 4 }, { \"VOL\": \"gleaming-beeswax-45\", \"DEPART\": 108, \"DUREE\": 3, \"PRIX\": 9 }, { \"VOL\": \"husky-bathrobe-96\", \"DEPART\": 109, \"DUREE\": 8, \"PRIX\": 8 }, { \"VOL\": \"helpless-fish-39\", \"DEPART\": 108, \"DUREE\": 1, \"PRIX\": 4 }, { \"VOL\": \"combative-studio-6\", \"DEPART\": 114, \"DUREE\": 4, \"PRIX\": 12 }, { \"VOL\": \"handsome-book-45\", \"DEPART\": 112, \"DUREE\": 5, \"PRIX\": 15 }, { \"VOL\": \"faint-homemaker-44\", \"DEPART\": 111, \"DUREE\": 2, \"PRIX\": 2 }, { \"VOL\": \"wild-flax-69\", \"DEPART\": 111, \"DUREE\": 4, \"PRIX\": 9 }, { \"VOL\": \"old-fashioned-treason-66\", \"DEPART\": 114, \"DUREE\": 4, \"PRIX\": 5 }, { \"VOL\": \"dull-polo-35\", \"DEPART\": 117, \"DUREE\": 5, \"PRIX\": 21 }, { \"VOL\": \"time-limousine-92\", \"DEPART\": 116, \"DUREE\": 6, \"PRIX\": 16 }, { \"VOL\": \"obnoxious-pigeon-8\", \"DEPART\": 118, \"DUREE\": 10, \"PRIX\": 3 }, { \"VOL\": \"dark-gunboat-93\", \"DEPART\": 117, \"DUREE\": 10, \"PRIX\": 10 }, { \"VOL\": \"prickly-math-83\", \"DEPART\": 118, \"DUREE\": 17, \"PRIX\": 1 }, { \"VOL\": \"colorful-minibike-97\", \"DEPART\": 120, \"DUREE\": 2, \"PRIX\": 4 }, { \"VOL\": \"nervous-mosque-31\", \"DEPART\": 122, \"DUREE\": 2, \"PRIX\": 9 }, { \"VOL\": \"loud-pussycat-63\", \"DEPART\": 124, \"DUREE\": 4, \"PRIX\": 10 }, { \"VOL\": \"nervous-relaxation-56\", \"DEPART\": 121, \"DUREE\": 6, \"PRIX\": 9 }, { \"VOL\": \"obedient-splendor-26\", \"DEPART\": 121, \"DUREE\": 19, \"PRIX\": 1 }, { \"VOL\": \"jolly-suntan-14\", \"DEPART\": 126, \"DUREE\": 7, \"PRIX\": 5 }, { \"VOL\": \"thankful-mustang-40\", \"DEPART\": 129, \"DUREE\": 3, \"PRIX\": 19 }, { \"VOL\": \"small-turbojet-40\", \"DEPART\": 126, \"DUREE\": 7, \"PRIX\": 6 }, { \"VOL\": \"friendly-terminology-93\", \"DEPART\": 129, \"DUREE\": 5, \"PRIX\": 15 }, { \"VOL\": \"gifted-vasectomy-26\", \"DEPART\": 127, \"DUREE\": 12, \"PRIX\": 1 }, { \"VOL\": \"brainy-cheesecake-76\", \"DEPART\": 134, \"DUREE\": 4, \"PRIX\": 30 }, { \"VOL\": \"terrible-utensil-6\", \"DEPART\": 134, \"DUREE\": 4, \"PRIX\": 4 }, { \"VOL\": \"dull-talc-34\", \"DEPART\": 134, \"DUREE\": 1, \"PRIX\": 5 }, { \"VOL\": \"envious-sideburns-15\", \"DEPART\": 134, \"DUREE\": 6, \"PRIX\": 6 }, { \"VOL\": \"brief-starter-19\", \"DEPART\": 133, \"DUREE\": 12, \"PRIX\": 4 }, { \"VOL\": \"inquisitive-vet-70\", \"DEPART\": 139, \"DUREE\": 10, \"PRIX\": 14 }, { \"VOL\": \"hushed-photography-46\", \"DEPART\": 139, \"DUREE\": 10, \"PRIX\": 18 }, { \"VOL\": \"mysterious-telegram-90\", \"DEPART\": 135, \"DUREE\": 9, \"PRIX\": 8 }, { \"VOL\": \"shy-jacuzzi-94\", \"DEPART\": 139, \"DUREE\": 5, \"PRIX\": 6 }, { \"VOL\": \"tall-pesticide-21\", \"DEPART\": 136, \"DUREE\": 16, \"PRIX\": 6 }, { \"VOL\": \"ugly-aunt-88\", \"DEPART\": 142, \"DUREE\": 9, \"PRIX\": 25 }, { \"VOL\": \"blue-spinach-96\", \"DEPART\": 140, \"DUREE\": 2, \"PRIX\": 19 }, { \"VOL\": \"husky-wingspan-80\", \"DEPART\": 140, \"DUREE\": 6, \"PRIX\": 10 }, { \"VOL\": \"itchy-vine-53\", \"DEPART\": 144, \"DUREE\": 3, \"PRIX\": 7 }, { \"VOL\": \"tough-magnesium-62\", \"DEPART\": 144, \"DUREE\": 16, \"PRIX\": 4 }, { \"VOL\": \"repulsive-roach-29\", \"DEPART\": 147, \"DUREE\": 3, \"PRIX\": 22 }, { \"VOL\": \"blue-safari-69\", \"DEPART\": 145, \"DUREE\": 5, \"PRIX\": 22 }, { \"VOL\": \"different-ankle-97\", \"DEPART\": 149, \"DUREE\": 8, \"PRIX\": 10 }, { \"VOL\": \"big-haze-34\", \"DEPART\": 148, \"DUREE\": 2, \"PRIX\": 15 }, { \"VOL\": \"weary-apartment-49\", \"DEPART\": 145, \"DUREE\": 2, \"PRIX\": 7 } ]"
    val expected = "{\"gain\":525,\"path\":[\"high-scoutmaster-39\",\"dull-destroyer-25\",\"nasty-sidearm-15\",\"confused-juicer-48\",\"nice-strand-40\",\"crooked-unicycle-10\",\"hollow-oaf-72\",\"concerned-fridge-61\",\"frail-sauerkraut-23\",\"thankful-rawhide-68\",\"cooperative-numerical-89\",\"moaning-plantation-76\",\"quick-yam-88\",\"soft-noblewoman-44\",\"envious-shoeshine-76\",\"gorgeous-scorpio-17\",\"thundering-treble-18\",\"puzzled-wimp-48\",\"low-trefoil-47\",\"handsome-squirrel-1\",\"quaint-image-98\",\"creepy-villa-63\",\"handsome-book-45\",\"dull-polo-35\",\"nervous-mosque-31\",\"loud-pussycat-63\",\"thankful-mustang-40\",\"brainy-cheesecake-76\",\"blue-spinach-96\",\"weary-apartment-49\",\"repulsive-roach-29\"]}"

    assert(expected === optimize(json))
  }

  test("50000 requests") {
    val json = Source.fromFile("test/bvo/scala1/codestory/jajascript/jajascript-50000.txt").mkString
    optimize(json)
  }
}